/*
 *  Driver for Faraday A500 pin controller
 *
 *  Copyright (C) 2015 Faraday Technology
 *  Copyright (C) 2018 Faraday Linux Automation Tool
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
 
#include <linux/init.h>
#include <linux/module.h>
#include <linux/of.h>
#include <linux/platform_device.h>
#include <linux/pinctrl/pinctrl.h>

#include "pinctrl-ftscu010.h"

#define A500_PMUR_MFS0  0x8400
#define A500_PMUR_MFS1  0x8404
#define A500_PMUR_MFS2  0x8408
#define A500_PMUR_MFS3  0x840c
#define A500_PMUR_MFS4  0x8410
#define A500_PMUR_MFS5  0x8414
#define A500_PMUR_MFS6  0x8418
#define A500_PMUR_MFS7  0x841c
#define A500_PMUR_MFS8  0x8420
#define A500_PMUR_MFS9  0x8424
#define A500_PMUR_MFS10 0x8430
#define A500_PMUR_MFS11 0x8434
#define A500_PMUR_MFS12 0x8438
#define A500_PMUR_MFS13 0x843c
#define A500_PMUR_MFS14 0x8440
#define A500_PMUR_MFS15 0x8444
#define A500_PMUR_MFS16 0x8448
#define A500_PMUR_MFS17 0x844c
#define A500_PMUR_MFS18 0x8450
#define A500_PMUR_MFS19 0x8458
#define A500_PMUR_MFS20 0x845c
#define A500_PMUR_MFS21 0x8460
#define A500_PMUR_MFS22 0x8464
#define A500_PMUR_MFS23 0x8468
#define A500_PMUR_MFS24 0x846c
#define A500_PMUR_MFS25 0x8470
#define A500_PMUR_MFS26 0x8474
#define A500_PMUR_MFS27 0x8478
#define A500_PMUR_MFS28 0x847c
#define A500_PMUR_MFS29 0x8480
#define A500_PMUR_MFS30 0x8484
#define A500_PMUR_MFS31 0x8488
#define A500_PMUR_MFS32 0x848c
#define A500_PMUR_MFS33 0x8490
#define A500_PMUR_MFS34 0x8494
#define A500_PMUR_MFS35 0x8498
#define A500_PMUR_MFS36 0x849c
#define A500_PMUR_MFS37 0x84a0
#define A500_PMUR_MFS38 0x84a4
#define A500_PMUR_MFS39 0x84a8
#define A500_PMUR_MFS40 0x84ac
#define A500_PMUR_MFS41 0x84b0
#define A500_PMUR_MFS42 0x84b4
#define A500_PMUR_MFS43 0x84b8
#define A500_PMUR_MFS44 0x84bc
#define A500_PMUR_MFS45 0x84c0
#define A500_PMUR_MFS46 0x84c4
#define A500_PMUR_MFS47 0x84c8
#define A500_PMUR_MFS48 0x84cc
#define A500_PMUR_MFS49 0x84d0
#define A500_PMUR_MFS50 0x84d4
#define A500_PMUR_MFS51 0x84d8
#define A500_PMUR_MFS52 0x84dc
#define A500_PMUR_MFS53 0x84e0
#define A500_PMUR_MFS54 0x84e4
#define A500_PMUR_MFS55 0x84e8
#define A500_PMUR_MFS56 0x84ec
#define A500_PMUR_MFS57 0x84f0
#define A500_PMUR_MFS58 0x84f4

/* Pins */
enum{
	A500_PIN_X_GMII0_MDIO,
	A500_PIN_X_GMII0_MDC,
	A500_PIN_X_GMII0_RX_DV,
	A500_PIN_X_GMII0_RXD_0,
	A500_PIN_X_GMII0_RXD_1,
	A500_PIN_X_GMII0_RXD_2,
	A500_PIN_X_GMII0_RXD_3,
	A500_PIN_X_GMII0_TX_EN,
	A500_PIN_X_GMII0_TXD_0,
	A500_PIN_X_GMII0_TXD_1,
	A500_PIN_X_GMII0_TXD_2,
	A500_PIN_X_GMII0_TXD_3,
	A500_PIN_X_GMII0_TX_ER,
	A500_PIN_X_GMII0_RX_ER,
	A500_PIN_X_GMII0_CRS,
	A500_PIN_X_GMII0_COL,
	A500_PIN_X_GMII1_MDIO,
	A500_PIN_X_GMII1_MDC,
	A500_PIN_X_GMII1_RX_DV,
	A500_PIN_X_GMII1_RXD_0,
	A500_PIN_X_GMII1_RXD_1,
	A500_PIN_X_GMII1_RXD_2,
	A500_PIN_X_GMII1_RXD_3,
	A500_PIN_X_GMII1_TX_EN,
	A500_PIN_X_GMII1_TXD_0,
	A500_PIN_X_GMII1_TXD_1,
	A500_PIN_X_GMII1_TXD_2,
	A500_PIN_X_GMII1_TXD_3,
	A500_PIN_X_GMII1_TX_ER,
	A500_PIN_X_GMII1_RX_ER,
	A500_PIN_X_GMII1_CRS,
	A500_PIN_X_GMII1_COL,
	A500_PIN_X_HM1_HBUSREQ,
	A500_PIN_X_HM1_HGRANT,
	A500_PIN_X_HM1_HLOCK,
	A500_PIN_X_HM2_HBUSREQ,
	A500_PIN_X_HM2_HGRANT,
	A500_PIN_X_HM2_HLOCK,
	A500_PIN_X_HM3_HBUSREQ,
	A500_PIN_X_HM3_HGRANT,
	A500_PIN_X_HM3_HLOCK,
	A500_PIN_X_HM4_HBUSREQ,
	A500_PIN_X_HM4_HGRANT,
	A500_PIN_X_HM4_HLOCK,
	A500_PIN_X_HS1_HSEL,
	A500_PIN_X_HS2_HSEL,
	A500_PIN_X_HS3_HSEL,
	A500_PIN_X_HS4_HSEL,
	A500_PIN_X_HS5_HSEL,
	A500_PIN_X_HS6_HSEL,
	A500_PIN_X_HS7_HSEL,
	A500_PIN_X_HS8_HSEL,
	A500_PIN_X_EXT_FIQ,
	A500_PIN_X_EXT_INT_0,
	A500_PIN_X_EXT_INT_1,
	A500_PIN_X_LCD_PCLK,
	A500_PIN_X_LCD_DAT_0,
	A500_PIN_X_LCD_DAT_1,
	A500_PIN_X_LCD_DAT_2,
	A500_PIN_X_LCD_DAT_3,
	A500_PIN_X_LCD_DAT_4,
	A500_PIN_X_LCD_DAT_5,
	A500_PIN_X_LCD_DAT_6,
	A500_PIN_X_LCD_DAT_7,
	A500_PIN_X_LCD_DAT_8,
	A500_PIN_X_LCD_DAT_9,
	A500_PIN_X_LCD_DAT_10,
	A500_PIN_X_LCD_DAT_11,
	A500_PIN_X_LCD_DAT_12,
	A500_PIN_X_LCD_DAT_13,
	A500_PIN_X_LCD_DAT_14,
	A500_PIN_X_LCD_DAT_15,
	A500_PIN_X_LCD_DAT_16,
	A500_PIN_X_LCD_DAT_17,
	A500_PIN_X_LCD_DAT_18,
	A500_PIN_X_LCD_DAT_19,
	A500_PIN_X_LCD_DAT_20,
	A500_PIN_X_LCD_DAT_21,
	A500_PIN_X_LCD_DAT_22,
	A500_PIN_X_LCD_DAT_23,
	A500_PIN_X_I2C_DATA_0,
	A500_PIN_X_I2C_CLK_0,
	A500_PIN_X_I2C_DATA_1,
	A500_PIN_X_I2C_CLK_1,
	A500_PIN_X_UART0_RX,
	A500_PIN_X_UART0_TX,
	A500_PIN_X_UART1_RX,
	A500_PIN_X_UART1_TX,
	A500_PIN_X_UART2_RX,
	A500_PIN_X_UART2_TX,
	A500_PIN_X_SPI_CS_N,
	A500_PIN_X_SPI_CLK,
	A500_PIN_X_SPI_DO,
	A500_PIN_X_SPI_DI,
	A500_PIN_X_SD_CARD_PWREN,
	A500_PIN_X_SD_W_PORT,
};

#define A500_PINCTRL_PIN(x) PINCTRL_PIN(A500_PIN_ ## x, #x)

static const struct pinctrl_pin_desc a500_pins[] = {
	A500_PINCTRL_PIN(X_GMII0_MDIO),
	A500_PINCTRL_PIN(X_GMII0_MDC),
	A500_PINCTRL_PIN(X_GMII0_RX_DV),
	A500_PINCTRL_PIN(X_GMII0_RXD_0),
	A500_PINCTRL_PIN(X_GMII0_RXD_1),
	A500_PINCTRL_PIN(X_GMII0_RXD_2),
	A500_PINCTRL_PIN(X_GMII0_RXD_3),
	A500_PINCTRL_PIN(X_GMII0_TX_EN),
	A500_PINCTRL_PIN(X_GMII0_TXD_0),
	A500_PINCTRL_PIN(X_GMII0_TXD_1),
	A500_PINCTRL_PIN(X_GMII0_TXD_2),
	A500_PINCTRL_PIN(X_GMII0_TXD_3),
	A500_PINCTRL_PIN(X_GMII0_TX_ER),
	A500_PINCTRL_PIN(X_GMII0_RX_ER),
	A500_PINCTRL_PIN(X_GMII0_CRS),
	A500_PINCTRL_PIN(X_GMII0_COL),
	A500_PINCTRL_PIN(X_GMII1_MDIO),
	A500_PINCTRL_PIN(X_GMII1_MDC),
	A500_PINCTRL_PIN(X_GMII1_RX_DV),
	A500_PINCTRL_PIN(X_GMII1_RXD_0),
	A500_PINCTRL_PIN(X_GMII1_RXD_1),
	A500_PINCTRL_PIN(X_GMII1_RXD_2),
	A500_PINCTRL_PIN(X_GMII1_RXD_3),
	A500_PINCTRL_PIN(X_GMII1_TX_EN),
	A500_PINCTRL_PIN(X_GMII1_TXD_0),
	A500_PINCTRL_PIN(X_GMII1_TXD_1),
	A500_PINCTRL_PIN(X_GMII1_TXD_2),
	A500_PINCTRL_PIN(X_GMII1_TXD_3),
	A500_PINCTRL_PIN(X_GMII1_TX_ER),
	A500_PINCTRL_PIN(X_GMII1_RX_ER),
	A500_PINCTRL_PIN(X_GMII1_CRS),
	A500_PINCTRL_PIN(X_GMII1_COL),
	A500_PINCTRL_PIN(X_HM1_HBUSREQ),
	A500_PINCTRL_PIN(X_HM1_HGRANT),
	A500_PINCTRL_PIN(X_HM1_HLOCK),
	A500_PINCTRL_PIN(X_HM2_HBUSREQ),
	A500_PINCTRL_PIN(X_HM2_HGRANT),
	A500_PINCTRL_PIN(X_HM2_HLOCK),
	A500_PINCTRL_PIN(X_HM3_HBUSREQ),
	A500_PINCTRL_PIN(X_HM3_HGRANT),
	A500_PINCTRL_PIN(X_HM3_HLOCK),
	A500_PINCTRL_PIN(X_HM4_HBUSREQ),
	A500_PINCTRL_PIN(X_HM4_HGRANT),
	A500_PINCTRL_PIN(X_HM4_HLOCK),
	A500_PINCTRL_PIN(X_HS1_HSEL),
	A500_PINCTRL_PIN(X_HS2_HSEL),
	A500_PINCTRL_PIN(X_HS3_HSEL),
	A500_PINCTRL_PIN(X_HS4_HSEL),
	A500_PINCTRL_PIN(X_HS5_HSEL),
	A500_PINCTRL_PIN(X_HS6_HSEL),
	A500_PINCTRL_PIN(X_HS7_HSEL),
	A500_PINCTRL_PIN(X_HS8_HSEL),
	A500_PINCTRL_PIN(X_EXT_FIQ),
	A500_PINCTRL_PIN(X_EXT_INT_0),
	A500_PINCTRL_PIN(X_EXT_INT_1),
	A500_PINCTRL_PIN(X_LCD_PCLK),
	A500_PINCTRL_PIN(X_LCD_DAT_0),
	A500_PINCTRL_PIN(X_LCD_DAT_1),
	A500_PINCTRL_PIN(X_LCD_DAT_2),
	A500_PINCTRL_PIN(X_LCD_DAT_3),
	A500_PINCTRL_PIN(X_LCD_DAT_4),
	A500_PINCTRL_PIN(X_LCD_DAT_5),
	A500_PINCTRL_PIN(X_LCD_DAT_6),
	A500_PINCTRL_PIN(X_LCD_DAT_7),
	A500_PINCTRL_PIN(X_LCD_DAT_8),
	A500_PINCTRL_PIN(X_LCD_DAT_9),
	A500_PINCTRL_PIN(X_LCD_DAT_10),
	A500_PINCTRL_PIN(X_LCD_DAT_11),
	A500_PINCTRL_PIN(X_LCD_DAT_12),
	A500_PINCTRL_PIN(X_LCD_DAT_13),
	A500_PINCTRL_PIN(X_LCD_DAT_14),
	A500_PINCTRL_PIN(X_LCD_DAT_15),
	A500_PINCTRL_PIN(X_LCD_DAT_16),
	A500_PINCTRL_PIN(X_LCD_DAT_17),
	A500_PINCTRL_PIN(X_LCD_DAT_18),
	A500_PINCTRL_PIN(X_LCD_DAT_19),
	A500_PINCTRL_PIN(X_LCD_DAT_20),
	A500_PINCTRL_PIN(X_LCD_DAT_21),
	A500_PINCTRL_PIN(X_LCD_DAT_22),
	A500_PINCTRL_PIN(X_LCD_DAT_23),
	A500_PINCTRL_PIN(X_I2C_DATA_0),
	A500_PINCTRL_PIN(X_I2C_CLK_0),
	A500_PINCTRL_PIN(X_I2C_DATA_1),
	A500_PINCTRL_PIN(X_I2C_CLK_1),
	A500_PINCTRL_PIN(X_UART0_RX),
	A500_PINCTRL_PIN(X_UART0_TX),
	A500_PINCTRL_PIN(X_UART1_RX),
	A500_PINCTRL_PIN(X_UART1_TX),
	A500_PINCTRL_PIN(X_UART2_RX),
	A500_PINCTRL_PIN(X_UART2_TX),
	A500_PINCTRL_PIN(X_SPI_CS_N),
	A500_PINCTRL_PIN(X_SPI_CLK),
	A500_PINCTRL_PIN(X_SPI_DO),
	A500_PINCTRL_PIN(X_SPI_DI),
	A500_PINCTRL_PIN(X_SD_CARD_PWREN),
	A500_PINCTRL_PIN(X_SD_W_PORT),
};

/* Pin groups */
static const unsigned ftgmac030_pins[] = {
	A500_PIN_X_GMII0_MDC,
	A500_PIN_X_GMII0_MDIO,
	A500_PIN_X_GMII0_RXD_0,
#if 0	//20180907@BC: Comment these pins because they are located in the same group.
	A500_PIN_X_GMII0_RXD_1,
	A500_PIN_X_GMII0_RXD_2,
	A500_PIN_X_GMII0_RXD_3,
	A500_PIN_X_GMII0_RX_DV,
	A500_PIN_X_GMII0_RX_ER,
	A500_PIN_X_GMII0_TXD_0,
	A500_PIN_X_GMII0_TXD_1,
	A500_PIN_X_GMII0_TXD_2,
	A500_PIN_X_GMII0_TXD_3,
	A500_PIN_X_GMII0_TX_EN,
	A500_PIN_X_GMII0_TX_ER,
	A500_PIN_X_GMII0_COL,
	A500_PIN_X_GMII0_CRS,
#endif
};
static const unsigned ftgmac030_1_pins[] = {
	A500_PIN_X_GMII1_MDC,
	A500_PIN_X_GMII1_MDIO,
	A500_PIN_X_GMII1_RXD_0,
#if 0	//20180907@BC: Comment these pins because they are located in the same group.
	A500_PIN_X_GMII1_RXD_1,
	A500_PIN_X_GMII1_RXD_2,
	A500_PIN_X_GMII1_RXD_3,
	A500_PIN_X_GMII1_RX_DV,
	A500_PIN_X_GMII1_RX_ER,
	A500_PIN_X_GMII1_TXD_0,
	A500_PIN_X_GMII1_TXD_1,
	A500_PIN_X_GMII1_TXD_2,
	A500_PIN_X_GMII1_TXD_3,
	A500_PIN_X_GMII1_TX_EN,
	A500_PIN_X_GMII1_TX_ER,
	A500_PIN_X_GMII1_COL,
	A500_PIN_X_GMII1_CRS,
#endif
};
static const unsigned ftgpio010_pins[] = {
	A500_PIN_X_GMII0_COL,
	A500_PIN_X_GMII0_CRS,
	A500_PIN_X_GMII0_MDC,
	A500_PIN_X_GMII0_MDIO,
	A500_PIN_X_GMII0_RXD_0,
	A500_PIN_X_GMII0_RXD_1,
	A500_PIN_X_GMII0_RXD_2,
	A500_PIN_X_GMII0_RXD_3,
	A500_PIN_X_GMII0_RX_DV,
	A500_PIN_X_GMII0_RX_ER,
	A500_PIN_X_GMII0_TXD_0,
	A500_PIN_X_GMII0_TXD_1,
	A500_PIN_X_GMII0_TXD_2,
	A500_PIN_X_GMII0_TXD_3,
	A500_PIN_X_GMII0_TX_EN,
	A500_PIN_X_GMII0_TX_ER,
	A500_PIN_X_GMII1_COL,
	A500_PIN_X_GMII1_CRS,
	A500_PIN_X_GMII1_MDC,
	A500_PIN_X_GMII1_MDIO,
	A500_PIN_X_GMII1_RXD_0,
	A500_PIN_X_GMII1_RXD_1,
	A500_PIN_X_GMII1_RXD_2,
	A500_PIN_X_GMII1_RXD_3,
	A500_PIN_X_GMII1_RX_DV,
	A500_PIN_X_GMII1_RX_ER,
	A500_PIN_X_GMII1_TXD_0,
	A500_PIN_X_GMII1_TXD_1,
	A500_PIN_X_GMII1_TXD_2,
	A500_PIN_X_GMII1_TXD_3,
	A500_PIN_X_GMII1_TX_EN,
	A500_PIN_X_GMII1_TX_ER,
};
static const unsigned ftgpio010_1_pins[] = {
	A500_PIN_X_EXT_FIQ,
	A500_PIN_X_EXT_INT_0,
	A500_PIN_X_EXT_INT_1,
	A500_PIN_X_HM1_HBUSREQ,
	A500_PIN_X_HM1_HGRANT,
	A500_PIN_X_HM1_HLOCK,
	A500_PIN_X_HM2_HBUSREQ,
	A500_PIN_X_HM2_HGRANT,
	A500_PIN_X_HM2_HLOCK,
	A500_PIN_X_HM3_HBUSREQ,
	A500_PIN_X_HM3_HGRANT,
	A500_PIN_X_HM3_HLOCK,
	A500_PIN_X_HM4_HBUSREQ,
	A500_PIN_X_HM4_HGRANT,
	A500_PIN_X_HM4_HLOCK,
	A500_PIN_X_HS1_HSEL,
	A500_PIN_X_HS2_HSEL,
	A500_PIN_X_HS3_HSEL,
	A500_PIN_X_HS4_HSEL,
	A500_PIN_X_HS5_HSEL,
	A500_PIN_X_HS6_HSEL,
	A500_PIN_X_HS7_HSEL,
	A500_PIN_X_HS8_HSEL,
	A500_PIN_X_LCD_DAT_0,
	A500_PIN_X_LCD_DAT_1,
	A500_PIN_X_LCD_DAT_2,
	A500_PIN_X_LCD_DAT_3,
	A500_PIN_X_LCD_DAT_4,
	A500_PIN_X_LCD_DAT_5,
	A500_PIN_X_LCD_DAT_6,
	A500_PIN_X_LCD_DAT_7,
	A500_PIN_X_LCD_PCLK,
};
static const unsigned ftgpio010_2_pins[] = {
	A500_PIN_X_I2C_CLK_0,
	A500_PIN_X_I2C_CLK_1,
	A500_PIN_X_I2C_DATA_0,
	A500_PIN_X_I2C_DATA_1,
	A500_PIN_X_LCD_DAT_10,
	A500_PIN_X_LCD_DAT_11,
	A500_PIN_X_LCD_DAT_12,
	A500_PIN_X_LCD_DAT_13,
	A500_PIN_X_LCD_DAT_14,
	A500_PIN_X_LCD_DAT_15,
	A500_PIN_X_LCD_DAT_16,
	A500_PIN_X_LCD_DAT_17,
	A500_PIN_X_LCD_DAT_18,
	A500_PIN_X_LCD_DAT_19,
	A500_PIN_X_LCD_DAT_20,
	A500_PIN_X_LCD_DAT_21,
	A500_PIN_X_LCD_DAT_22,
	A500_PIN_X_LCD_DAT_23,
	A500_PIN_X_LCD_DAT_8,
	A500_PIN_X_LCD_DAT_9,
	A500_PIN_X_SD_CARD_PWREN,
	A500_PIN_X_SD_W_PORT,
	A500_PIN_X_SPI_CLK,
	A500_PIN_X_SPI_CS_N,
	A500_PIN_X_SPI_DI,
	A500_PIN_X_SPI_DO,
	A500_PIN_X_UART0_RX,
	A500_PIN_X_UART0_TX,
	A500_PIN_X_UART1_RX,
	A500_PIN_X_UART1_TX,
	A500_PIN_X_UART2_RX,
	A500_PIN_X_UART2_TX,
};
static const unsigned ftiic010_pins[] = {
	A500_PIN_X_I2C_CLK_0,
	A500_PIN_X_I2C_DATA_0,
};
static const unsigned ftiic010_1_pins[] = {
	A500_PIN_X_I2C_CLK_1,
	A500_PIN_X_I2C_DATA_1,
};
static const unsigned ftlcdc210_pins[] = {
	A500_PIN_X_LCD_PCLK,
#if 0	//20180907@BC: Comment these pins because they are located in the same group.
	A500_PIN_X_LCD_DAT_0,
	A500_PIN_X_LCD_DAT_1,
	A500_PIN_X_LCD_DAT_2,
	A500_PIN_X_LCD_DAT_3,
	A500_PIN_X_LCD_DAT_4,
	A500_PIN_X_LCD_DAT_5,
	A500_PIN_X_LCD_DAT_6,
	A500_PIN_X_LCD_DAT_7,
	A500_PIN_X_LCD_DAT_8,
	A500_PIN_X_LCD_DAT_9,
	A500_PIN_X_LCD_DAT_10,
	A500_PIN_X_LCD_DAT_11,
	A500_PIN_X_LCD_DAT_12,
	A500_PIN_X_LCD_DAT_13,
	A500_PIN_X_LCD_DAT_14,
	A500_PIN_X_LCD_DAT_15,
	A500_PIN_X_LCD_DAT_16,
	A500_PIN_X_LCD_DAT_17,
	A500_PIN_X_LCD_DAT_18,
	A500_PIN_X_LCD_DAT_19,
	A500_PIN_X_LCD_DAT_20,
	A500_PIN_X_LCD_DAT_21,
	A500_PIN_X_LCD_DAT_22,
	A500_PIN_X_LCD_DAT_23,
#endif
};
static const unsigned ftsdc021_pins[] = {
	A500_PIN_X_SD_CARD_PWREN,
	A500_PIN_X_SD_W_PORT,
};
static const unsigned ftspi020_pins[] = {
	A500_PIN_X_SPI_CLK,
	A500_PIN_X_SPI_CS_N,
	A500_PIN_X_SPI_DI,
	A500_PIN_X_SPI_DO,
};
static const unsigned ftuart010_pins[] = {
	A500_PIN_X_UART0_RX,
	A500_PIN_X_UART0_TX,
};
static const unsigned ftuart010_1_pins[] = {
	A500_PIN_X_UART1_RX,
	A500_PIN_X_UART1_TX,
};
static const unsigned ftuart010_2_pins[] = {
	A500_PIN_X_UART2_RX,
	A500_PIN_X_UART2_TX,
};
static const unsigned ext_int_pins[] = {
	A500_PIN_X_EXT_FIQ,
	A500_PIN_X_EXT_INT_0,
	A500_PIN_X_EXT_INT_1,
};
static const unsigned na_pins[] = {
	A500_PIN_X_EXT_FIQ,
	A500_PIN_X_EXT_INT_0,
	A500_PIN_X_EXT_INT_1,
	A500_PIN_X_GMII0_COL,
	A500_PIN_X_GMII0_CRS,
	A500_PIN_X_GMII0_MDC,
	A500_PIN_X_GMII0_MDIO,
	A500_PIN_X_GMII0_RXD_0,
	A500_PIN_X_GMII0_RXD_1,
	A500_PIN_X_GMII0_RXD_2,
	A500_PIN_X_GMII0_RXD_3,
	A500_PIN_X_GMII0_RX_DV,
	A500_PIN_X_GMII0_RX_ER,
	A500_PIN_X_GMII0_TXD_0,
	A500_PIN_X_GMII0_TXD_1,
	A500_PIN_X_GMII0_TXD_2,
	A500_PIN_X_GMII0_TXD_3,
	A500_PIN_X_GMII0_TX_EN,
	A500_PIN_X_GMII0_TX_ER,
	A500_PIN_X_GMII1_COL,
	A500_PIN_X_GMII1_CRS,
	A500_PIN_X_GMII1_MDC,
	A500_PIN_X_GMII1_MDIO,
	A500_PIN_X_GMII1_RXD_0,
	A500_PIN_X_GMII1_RXD_1,
	A500_PIN_X_GMII1_RXD_2,
	A500_PIN_X_GMII1_RXD_3,
	A500_PIN_X_GMII1_RX_DV,
	A500_PIN_X_GMII1_RX_ER,
	A500_PIN_X_GMII1_TXD_0,
	A500_PIN_X_GMII1_TXD_1,
	A500_PIN_X_GMII1_TXD_2,
	A500_PIN_X_GMII1_TXD_3,
	A500_PIN_X_GMII1_TX_EN,
	A500_PIN_X_GMII1_TX_ER,
	A500_PIN_X_HM1_HBUSREQ,
	A500_PIN_X_HM1_HGRANT,
	A500_PIN_X_HM1_HLOCK,
	A500_PIN_X_HM2_HBUSREQ,
	A500_PIN_X_HM2_HGRANT,
	A500_PIN_X_HM2_HLOCK,
	A500_PIN_X_HM3_HBUSREQ,
	A500_PIN_X_HM3_HGRANT,
	A500_PIN_X_HM3_HLOCK,
	A500_PIN_X_HM4_HBUSREQ,
	A500_PIN_X_HM4_HGRANT,
	A500_PIN_X_HM4_HLOCK,
	A500_PIN_X_HS1_HSEL,
	A500_PIN_X_HS2_HSEL,
	A500_PIN_X_HS3_HSEL,
	A500_PIN_X_HS4_HSEL,
	A500_PIN_X_HS5_HSEL,
	A500_PIN_X_HS6_HSEL,
	A500_PIN_X_HS7_HSEL,
	A500_PIN_X_HS8_HSEL,
	A500_PIN_X_I2C_CLK_0,
	A500_PIN_X_I2C_CLK_1,
	A500_PIN_X_I2C_DATA_0,
	A500_PIN_X_I2C_DATA_1,
	A500_PIN_X_LCD_DAT_0,
	A500_PIN_X_LCD_DAT_1,
	A500_PIN_X_LCD_DAT_10,
	A500_PIN_X_LCD_DAT_11,
	A500_PIN_X_LCD_DAT_12,
	A500_PIN_X_LCD_DAT_13,
	A500_PIN_X_LCD_DAT_14,
	A500_PIN_X_LCD_DAT_15,
	A500_PIN_X_LCD_DAT_16,
	A500_PIN_X_LCD_DAT_17,
	A500_PIN_X_LCD_DAT_18,
	A500_PIN_X_LCD_DAT_19,
	A500_PIN_X_LCD_DAT_2,
	A500_PIN_X_LCD_DAT_20,
	A500_PIN_X_LCD_DAT_21,
	A500_PIN_X_LCD_DAT_22,
	A500_PIN_X_LCD_DAT_23,
	A500_PIN_X_LCD_DAT_3,
	A500_PIN_X_LCD_DAT_4,
	A500_PIN_X_LCD_DAT_5,
	A500_PIN_X_LCD_DAT_6,
	A500_PIN_X_LCD_DAT_7,
	A500_PIN_X_LCD_DAT_8,
	A500_PIN_X_LCD_DAT_9,
	A500_PIN_X_LCD_PCLK,
	A500_PIN_X_SD_CARD_PWREN,
	A500_PIN_X_SD_W_PORT,
	A500_PIN_X_SPI_CLK,
	A500_PIN_X_SPI_CS_N,
	A500_PIN_X_SPI_DI,
	A500_PIN_X_SPI_DO,
	A500_PIN_X_UART0_RX,
	A500_PIN_X_UART0_TX,
	A500_PIN_X_UART1_RX,
	A500_PIN_X_UART1_TX,
	A500_PIN_X_UART2_RX,
	A500_PIN_X_UART2_TX,
};
static const unsigned sus_ext_ahb_pins[] = {
	A500_PIN_X_HM1_HBUSREQ,
	A500_PIN_X_HM1_HGRANT,
	A500_PIN_X_HM1_HLOCK,
	A500_PIN_X_HM2_HBUSREQ,
	A500_PIN_X_HM2_HGRANT,
	A500_PIN_X_HM2_HLOCK,
	A500_PIN_X_HM3_HBUSREQ,
	A500_PIN_X_HM3_HGRANT,
	A500_PIN_X_HM3_HLOCK,
	A500_PIN_X_HM4_HBUSREQ,
	A500_PIN_X_HM4_HGRANT,
	A500_PIN_X_HM4_HLOCK,
	A500_PIN_X_HS1_HSEL,
	A500_PIN_X_HS2_HSEL,
	A500_PIN_X_HS3_HSEL,
	A500_PIN_X_HS4_HSEL,
	A500_PIN_X_HS5_HSEL,
	A500_PIN_X_HS6_HSEL,
	A500_PIN_X_HS7_HSEL,
	A500_PIN_X_HS8_HSEL,
};

#define GROUP(gname)					\
	{						\
		.name = #gname,				\
		.pins = gname##_pins,			\
		.npins = ARRAY_SIZE(gname##_pins),	\
	}
	
static const struct ftscu010_pin_group a500_groups[] = {
	GROUP(ftgmac030),
	GROUP(ftgmac030_1),
	GROUP(ftgpio010),
	GROUP(ftgpio010_1),
	GROUP(ftgpio010_2),
	GROUP(ftiic010),
	GROUP(ftiic010_1),
	GROUP(ftlcdc210),
	GROUP(ftsdc021),
	GROUP(ftspi020),
	GROUP(ftuart010),
	GROUP(ftuart010_1),
	GROUP(ftuart010_2),
	GROUP(ext_int),
	GROUP(na),
	GROUP(sus_ext_ahb),
};

/* Pin function groups */
static const char * const ftgmac030_groups[] = { "ftgmac030" };
static const char * const ftgmac030_1_groups[] = { "ftgmac030_1" };
static const char * const ftgpio010_groups[] = { "ftgpio010" };
static const char * const ftgpio010_1_groups[] = { "ftgpio010_1" };
static const char * const ftgpio010_2_groups[] = { "ftgpio010_2" };
static const char * const ftiic010_groups[] = { "ftiic010" };
static const char * const ftiic010_1_groups[] = { "ftiic010_1" };
static const char * const ftlcdc210_groups[] = { "ftlcdc210" };
static const char * const ftsdc021_groups[] = { "ftsdc021" };
static const char * const ftspi020_groups[] = { "ftspi020" };
static const char * const ftuart010_groups[] = { "ftuart010" };
static const char * const ftuart010_1_groups[] = { "ftuart010_1" };
static const char * const ftuart010_2_groups[] = { "ftuart010_2" };
static const char * const ext_int_groups[] = { "ext_int" };
static const char * const na_groups[] = { "na" };
static const char * const sus_ext_ahb_groups[] = { "sus_ext_ahb" };

/* Mux functions */
enum{
	A500_MUX_FTGMAC030,
	A500_MUX_FTGMAC030_1,
	A500_MUX_FTGPIO010,
	A500_MUX_FTGPIO010_1,
	A500_MUX_FTGPIO010_2,
	A500_MUX_FTIIC010,
	A500_MUX_FTIIC010_1,
	A500_MUX_FTLCDC210,
	A500_MUX_FTSDC021,
	A500_MUX_FTSPI020,
	A500_MUX_FTUART010,
	A500_MUX_FTUART010_1,
	A500_MUX_FTUART010_2,
	A500_MUX_EXT_INT,
	A500_MUX_NA,
	A500_MUX_SUS_EXT_AHB,
};

#define FUNCTION(fname)					\
	{						\
		.name = #fname,				\
		.groups = fname##_groups,		\
		.ngroups = ARRAY_SIZE(fname##_groups),	\
	}

static const struct ftscu010_pmx_function a500_pmx_functions[] = {
	FUNCTION(ftgmac030),
	FUNCTION(ftgmac030_1),
	FUNCTION(ftgpio010),
	FUNCTION(ftgpio010_1),
	FUNCTION(ftgpio010_2),
	FUNCTION(ftiic010),
	FUNCTION(ftiic010_1),
	FUNCTION(ftlcdc210),
	FUNCTION(ftsdc021),
	FUNCTION(ftspi020),
	FUNCTION(ftuart010),
	FUNCTION(ftuart010_1),
	FUNCTION(ftuart010_2),
	FUNCTION(ext_int),
	FUNCTION(na),
	FUNCTION(sus_ext_ahb),
};

#define A500_PIN(pin, reg, f0, f1, f2, f3)		\
	[A500_PIN_ ## pin] = {				\
			.offset = A500_PMUR_ ## reg,	\
			.functions = {			\
				A500_MUX_ ## f0,	\
				A500_MUX_ ## f1,	\
				A500_MUX_ ## f2,	\
				A500_MUX_ ## f3,	\
			},				\
		}

static struct ftscu010_pin a500_pinmux_map[] = {
	/*             pin          reg     f0              f1              f2  f3 */
	A500_PIN(X_GMII0_MDIO,      MFS0,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_MDC,       MFS1,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_RX_DV,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_RXD_0,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_RXD_1,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_RXD_2,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_RXD_3,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_TX_EN,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_TXD_0,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_TXD_1,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_TXD_2,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_TXD_3,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_TX_ER,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_RX_ER,     MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_CRS,       MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII0_COL,       MFS2,   FTGPIO010,      FTGMAC030,      NA, NA),
	A500_PIN(X_GMII1_MDIO,      MFS3,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_MDC,       MFS4,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_RX_DV,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_RXD_0,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_RXD_1,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_RXD_2,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_RXD_3,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_TX_EN,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_TXD_0,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_TXD_1,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_TXD_2,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_TXD_3,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_TX_ER,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_RX_ER,     MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_CRS,       MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_GMII1_COL,       MFS5,   FTGPIO010,      FTGMAC030_1,    NA, NA),
	A500_PIN(X_HM1_HBUSREQ,     MFS20,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM1_HGRANT,      MFS21,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM1_HLOCK,       MFS22,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM2_HBUSREQ,     MFS23,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM2_HGRANT,      MFS24,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM2_HLOCK,       MFS25,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM3_HBUSREQ,     MFS26,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM3_HGRANT,      MFS27,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM3_HLOCK,       MFS28,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM4_HBUSREQ,     MFS29,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM4_HGRANT,      MFS30,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HM4_HLOCK,       MFS31,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS1_HSEL,        MFS32,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS2_HSEL,        MFS33,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS3_HSEL,        MFS34,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS4_HSEL,        MFS35,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS5_HSEL,        MFS36,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS6_HSEL,        MFS37,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS7_HSEL,        MFS38,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_HS8_HSEL,        MFS39,  SUS_EXT_AHB,    FTGPIO010_1,    NA, NA),
	A500_PIN(X_EXT_FIQ,         MFS40,  EXT_INT,        FTGPIO010_1,    NA, NA),
	A500_PIN(X_EXT_INT_0,       MFS41,  EXT_INT,        FTGPIO010_1,    NA, NA),
	A500_PIN(X_EXT_INT_1,       MFS42,  EXT_INT,        FTGPIO010_1,    NA, NA),
	A500_PIN(X_LCD_PCLK,        MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_0,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_1,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_2,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_3,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_4,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_5,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_6,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_7,       MFS17,  FTGPIO010_1,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_8,       MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_9,       MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_10,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_11,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_12,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_13,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_14,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_15,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_16,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_17,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_18,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_19,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_20,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_21,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_22,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_LCD_DAT_23,      MFS17,  FTGPIO010_2,    FTLCDC210,      NA, NA),
	A500_PIN(X_I2C_DATA_0,      MFS7,   FTGPIO010_2,    FTIIC010,       NA, NA),
	A500_PIN(X_I2C_CLK_0,       MFS6,   FTGPIO010_2,    FTIIC010,       NA, NA),
	A500_PIN(X_I2C_DATA_1,      MFS9,   FTGPIO010_2,    FTIIC010_1,     NA, NA),
	A500_PIN(X_I2C_CLK_1,       MFS8,   FTGPIO010_2,    FTIIC010_1,     NA, NA),
	A500_PIN(X_UART0_RX,        MFS51,  FTGPIO010_2,    FTUART010,      NA, NA),
	A500_PIN(X_UART0_TX,        MFS52,  FTGPIO010_2,    FTUART010,      NA, NA),
	A500_PIN(X_UART1_RX,        MFS53,  FTGPIO010_2,    FTUART010_1,    NA, NA),
	A500_PIN(X_UART1_TX,        MFS54,  FTGPIO010_2,    FTUART010_1,    NA, NA),
	A500_PIN(X_UART2_RX,        MFS55,  FTGPIO010_2,    FTUART010_2,    NA, NA),
	A500_PIN(X_UART2_TX,        MFS56,  FTGPIO010_2,    FTUART010_2,    NA, NA),
	A500_PIN(X_SD_CARD_PWREN,   MFS12,  FTGPIO010_2,    FTSDC021,       NA, NA),
	A500_PIN(X_SD_W_PORT,       MFS13,  FTGPIO010_2,    FTSDC021,       NA, NA),
};

static const struct ftscu010_pinctrl_soc_data a500_pinctrl_soc_data = {
	.pins = a500_pins,
	.npins = ARRAY_SIZE(a500_pins),
	.functions = a500_pmx_functions,
	.nfunctions = ARRAY_SIZE(a500_pmx_functions),
	.groups = a500_groups,
	.ngroups = ARRAY_SIZE(a500_groups),
	.map = a500_pinmux_map,
};

static int a500_pinctrl_probe(struct platform_device *pdev)
{
	return ftscu010_pinctrl_probe(pdev, &a500_pinctrl_soc_data);
}

static struct of_device_id faraday_pinctrl_of_match[] = {
	{ .compatible = "ftscu010-pinmux", "pinctrl-a500" },
	{ },
};

static struct platform_driver a500_pinctrl_driver = {
	.driver = {
		.name = "pinctrl-a500",
		.owner = THIS_MODULE,
		.of_match_table = faraday_pinctrl_of_match,
	},
	.probe = a500_pinctrl_probe,
	.remove = ftscu010_pinctrl_remove,
};

module_platform_driver(a500_pinctrl_driver);

MODULE_AUTHOR("Bo-Cun Chen <bcchen@faraday-tech.com");
MODULE_DESCRIPTION("Faraday A500 pinctrl driver");
MODULE_LICENSE("GPL");